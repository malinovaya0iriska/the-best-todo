(this["webpackJsonpthe-best-todo"]=this["webpackJsonpthe-best-todo"]||[]).push([[0],{139:function(t,e,n){},140:function(t,e,n){},171:function(t,e,n){"use strict";n.r(e);var c,a,i=n(0),r=n.n(i),o=n(36),s=n.n(o),d=(n(139),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,228)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),i(t),r(t)}))}),u=(n(140),n(118)),l=n(53),j=n(117),b=n(219),O=n(115),f=n(58),h=n(119),p=n(18),T=n(15),g=n(13),m=n(107),x=n.n(m).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"9f225800-9b44-4745-b381-d436ad2be4a7"}}),S=function(){return x.get("todo-lists")},v=function(t){return x.post("todo-lists",{title:t})},I=function(t){return x.delete("todo-lists/".concat(t))},y=function(t,e){return x.put("todo-lists/".concat(t),{title:e})},C=function(t){return x.post("auth/login",t)},E=function(){return x.get("auth/me")},k=function(){return x.delete("auth/login")},A=function(t,e){t.messages.length?e(F(t.messages[0])):e(F("Some error occurred")),e(P("failed"))},D=function(t,e){e(F(t.message?t.message:"Some error occurred")),e(P("failed"))},L={isLoggedIn:!1},w=function(t){return{type:"AUTH/SET-IS-LOGGED-IN",value:t}},N={status:"idle",error:null,isInitialized:!1},P=function(t){return{type:"APP/SET-STATUS",status:t}},F=function(t){return{type:"APP/SET-ERROR",error:t}},R=[],U=n(78),H=n(14),G=n(75),K=n(217),M=n(2),V=r.a.memo((function(t){var e=t.addItem,n=t.disabled,c=Object(i.useState)(""),a=Object(H.a)(c,2),r=a[0],o=a[1],s=Object(i.useState)(null),d=Object(H.a)(s,2),u=d[0],j=d[1],b=function(){r.trim()?(e(r.trim()),o("")):j("Heading is required!")};return Object(M.jsxs)("div",{children:[Object(M.jsx)(G.a,{error:!!u,variant:"outlined",className:u?"error":"",onChange:function(t){o(t.currentTarget.value)},onKeyPress:function(t){u&&j(null),"Enter"===t.key&&b()},value:r,label:"enter you heading...",helperText:u}),Object(M.jsx)(l.a,{color:"primary",size:"large",onClick:b,disabled:n,children:Object(M.jsx)(K.a,{})})]})})),Y=n(120);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(a||(a={}));var z=function(t){return x.get("/todo-lists/".concat(t,"/tasks"))},B=function(t,e){return x.post("todo-lists/".concat(t,"/tasks"),{title:e})},J=function(t,e){return x.delete("todo-lists/".concat(t,"/tasks/").concat(e))},Z=function(t,e,n){return x.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},q=r.a.memo((function(t){var e=t.value,n=t.onChange,c=t.disabled,a=Object(i.useState)(e),r=Object(H.a)(a,2),o=r[0],s=r[1],d=Object(i.useState)(!1),u=Object(H.a)(d,2),l=u[0],j=u[1];return l?Object(M.jsx)(G.a,{variant:"outlined",type:"text",autoFocus:!0,value:o,onChange:function(t){s(t.currentTarget.value)},onBlur:function(){j(!1),n(o)}}):Object(M.jsx)("span",{onDoubleClick:function(){!c&&j(!0)},children:e})})),W=n(72),_=n.n(W),Q=n(114),X=n(5),$={},tt=function(t,e,n){return function(c,a){c(P("loading"));var i=a().tasks[e].find((function(e){return e.id===t}));if(i){var r=Object(g.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:null===i||void 0===i?void 0:i.startDate,title:i.title,status:i.status},n);i&&Z(e,t,r).then((function(a){0===a.data.resultCode?(c(function(t,e,n){return{type:"UPDATE-TASK",model:e,todolistId:n,taskId:t}}(t,n,e)),c(P("succeeded"))):A(a.data,c)})).catch((function(t){D(t,c)}))}else console.warn("task not found in the state")}},et=r.a.memo((function(t){var e=Object(p.b)(),n=Object(i.useCallback)((function(n){e(tt(t.task.id,t.todolistId,{title:n}))}),[e]),a=Object(i.useCallback)((function(){var n,c;e((n=t.task.id,c=t.todolistId,function(t){t(P("loading")),t(function(t,e,n){return{type:"CHANGE-TASK-ENTITY-STATUS",id:t,entityStatus:"loading",todolistId:n}}(n,0,c)),J(c,n).then((function(e){0===e.data.resultCode?(t(function(t,e){return{type:"REMOVE-TASK",id:t,todolistId:e}}(n,c)),t(P("succeeded"))):A(e.data,t)})).catch((function(e){D(e,t)}))}))}),[e]);return Object(M.jsxs)("li",{className:t.task.status===c.Completed?"is-done":"",children:[Object(M.jsx)(Q.a,{checked:t.task.status===c.Completed,color:"secondary",onChange:function(n){var a=n.currentTarget.checked?c.Completed:c.New;e(tt(t.task.id,t.todolistId,{status:a}))}}),Object(M.jsx)(q,{value:t.task.title,disabled:"loading"===t.task.entityStatus,onChange:n}),Object(M.jsx)(l.a,{onClick:a,children:Object(M.jsx)(_.a,{})})]})})),nt=r.a.memo((function(t){var e=Object(p.c)((function(e){return e.tasks[t.id]})),n=Object(p.b)();Object(i.useEffect)((function(){var e;n((e=t.id,function(t){t(P("loading")),z(e).then((function(n){t(function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(n.data.items,e)),t(P("succeeded"))}))}))}),[]);var a=e;"active"===t.filter&&(a=a.filter((function(t){return t.status===c.New}))),"completed"===t.filter&&(a=a.filter((function(t){return t.status===c.Completed})));var r=Object(i.useCallback)((function(e){n(function(t,e){return function(n){n(P("loading")),B(e,t).then((function(t){0===t.data.resultCode?(n({type:"ADD-TASK",task:t.data.data.item}),n(P("succeeded"))):A(t.data,n)})).catch((function(t){D(t,n)}))}}(e,t.id))}),[t.id]),o=Object(i.useCallback)((function(){return t.changeFilter("all",t.id)}),[t.changeFilter,t.id]),s=Object(i.useCallback)((function(){return t.changeFilter("active",t.id)}),[t.changeFilter,t.id]),d=Object(i.useCallback)((function(){return t.changeFilter("completed",t.id)}),[t.changeFilter,t.id]),u=Object(i.useCallback)((function(e){return t.changeTodoTitle(e,t.id)}),[t.changeTodoTitle,t.id]);return Object(M.jsxs)("div",{children:[Object(M.jsxs)("h3",{children:[Object(M.jsx)(q,{value:t.title,disabled:"loading"===t.entityStatus,onChange:u}),Object(M.jsx)(l.a,{onClick:function(){t.removeTodolist(t.id)},disabled:"loading"===t.entityStatus,children:Object(M.jsx)(_.a,{})})]}),Object(M.jsx)(V,{addItem:r,disabled:"loading"===t.entityStatus}),Object(M.jsx)("ul",{children:a.map((function(e){return Object(M.jsx)(et,{task:e,todolistId:t.id},e.id)}))}),Object(M.jsxs)("div",{children:[Object(M.jsx)(f.a,{variant:"all"===t.filter?"outlined":"text",onClick:o,color:"inherit",children:"All"}),Object(M.jsx)(f.a,{variant:"active"===t.filter?"outlined":"text",onClick:s,color:"primary",children:"Active"}),Object(M.jsx)(f.a,{variant:"completed"===t.filter?"outlined":"text",onClick:d,color:"secondary",children:"Completed"})]})]})})),ct=n(19),at=function(t){var e=t.demo,n=void 0!==e&&e,c=Object(p.c)((function(t){return t.todolists})),a=Object(p.c)((function(t){return t.auth.isLoggedIn})),r=Object(p.b)();Object(i.useEffect)((function(){!n&&a&&r((function(t){t(P("loading")),S().then((function(e){t({type:"SET-TODOS",todos:e.data}),t(P("succeeded"))})).catch((function(e){D(e,t)}))}))}),[]);var o=Object(i.useCallback)((function(t,e){r(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",id:t,filter:e}}(e,t))}),[r]),s=Object(i.useCallback)((function(t){r(function(t){return function(e){e(P("loading")),e({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:t,entityStatus:"loading"}),I(t).then((function(n){0===n.data.resultCode?(e({type:"REMOVE-TODOLIST",id:t}),e(P("succeeded"))):A(n.data,e)})).catch((function(t){D(t,e)}))}}(t))}),[r]),d=Object(i.useCallback)((function(t){r(function(t){return function(e){e(P("loading")),v(t).then((function(t){0===t.data.resultCode?(e({type:"ADD-TODOLIST",todolist:t.data.data.item}),e(P("succeeded"))):A(t.data,e)})).catch((function(t){D(t,e)}))}}(t))}),[r]),u=Object(i.useCallback)((function(t,e){r(function(t,e){return function(n){n(P("loading")),y(t,e).then((function(c){0===c.data.resultCode?(n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(t,e)),n(P("succeeded"))):A(c.data,n)})).catch((function(t){D(t,n)}))}}(e,t))}),[r]);return a?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(U.a,{container:!0,style:{padding:"30px 0"},children:Object(M.jsx)(V,{addItem:d})}),Object(M.jsx)(U.a,{container:!0,spacing:10,children:c.map((function(t){return Object(M.jsx)(U.a,{item:!0,children:Object(M.jsx)(Y.a,{style:{padding:"25px 45px"},elevation:5,children:Object(M.jsx)(nt,{id:t.id,title:t.title,filter:t.filter,entityStatus:t.entityStatus,changeFilter:o,removeTodolist:s,changeTodoTitle:u})})},t.id)}))})]}):Object(M.jsx)(ct.a,{to:"/login"})},it=n(224),rt=n(222),ot=n(221),st=r.a.forwardRef((function(t,e){return Object(M.jsx)(ot.a,Object(g.a)({elevation:6,ref:e,variant:"filled"},t))}));function dt(){var t=Object(p.c)((function(t){return t.app.error})),e=Object(p.b)(),n=function(t,n){"clickaway"!==n&&e(F(null))};return Object(M.jsx)(rt.a,{open:!!t,autoHideDuration:6e3,onClose:n,children:Object(M.jsx)(st,{onClose:n,severity:"error",children:t})})}var ut=n(225),lt=n(227),jt=n(226),bt=n(214),Ot=n(113),ft=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.auth.isLoggedIn})),n=Object(Ot.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var c;t((c=e,function(t){t(P("loading")),C(c).then((function(e){0===e.data.resultCode?(t(w(!0)),t(P("succeeded"))):(A(e.data,t),t(P("failed")))})).catch((function(e){D(e,t)}))})),n.resetForm()}});return e?Object(M.jsx)(ct.a,{to:"/"}):Object(M.jsx)(U.a,{container:!0,justifyContent:"center",children:Object(M.jsx)(U.a,{item:!0,justifyContent:"center",children:Object(M.jsx)("form",{onSubmit:n.handleSubmit,children:Object(M.jsxs)(ut.a,{children:[Object(M.jsxs)(bt.a,{children:[Object(M.jsxs)("p",{children:["To log in get registered",Object(M.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(M.jsx)("p",{children:"or use common test account credentials:"}),Object(M.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(M.jsx)("p",{children:"Password: free"})]}),Object(M.jsxs)(jt.a,{children:[Object(M.jsx)(G.a,Object(g.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),Object(M.jsx)(G.a,Object(g.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),Object(M.jsx)(lt.a,{label:"Remember me",control:Object(M.jsx)(Q.a,Object(g.a)(Object(g.a)({},n.getFieldProps("rememberMe")),{},{checked:n.values.rememberMe}))}),Object(M.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},ht=n(116);function pt(t){var e=t.demo,n=void 0!==e&&e,c=Object(p.c)((function(t){return t.auth.isLoggedIn})),a=Object(p.c)((function(t){return t.app.status})),r=Object(p.c)((function(t){return t.app.isInitialized})),o=Object(p.b)();Object(i.useEffect)((function(){o((function(t){E().then((function(e){0===e.data.resultCode?t(w(!0)):t(w(!1)),t({type:"APP/SET-IS-INITIALIZED",value:!0})}))}))}),[]);var s=Object(i.useCallback)((function(){o((function(t){t(P("loading")),k().then((function(e){0===e.data.resultCode?(t(w(!1)),t(P("succeeded"))):(A(e.data,t),t(P("failed")))})).catch((function(e){D(e,t)}))}))}),[]);return r?Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)(dt,{}),Object(M.jsxs)(j.a,{position:"static",children:[Object(M.jsxs)(u.a,{style:{justifyContent:"space-between"},children:[Object(M.jsx)(l.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(M.jsx)(b.a,{})}),Object(M.jsx)(O.a,{variant:"h6",children:"News"}),c&&Object(M.jsx)(f.a,{variant:"outlined",color:"inherit",onClick:s,children:"Log OUT"})]}),"loading"===a&&Object(M.jsx)(it.a,{color:"secondary"})]}),Object(M.jsx)(h.a,{fixed:!0,children:Object(M.jsxs)(ct.d,{children:[Object(M.jsx)(ct.b,{exact:!0,path:"/",render:function(){return Object(M.jsx)(at,{demo:n})}}),Object(M.jsx)(ct.b,{path:"/login",render:function(){return Object(M.jsx)(ft,{})}}),Object(M.jsx)(ct.b,{path:"/404",render:function(){return Object(M.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(M.jsx)(ct.a,{from:"*",to:"/404"})]})})]}):Object(M.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(M.jsx)(ht.a,{})})}var Tt=n(111),gt=n(63),mt=n(112),xt=Object(gt.combineReducers)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODOS":var n=Object(g.a)({},t);return e.todos.forEach((function(t){n[t.id]=[]})),n;case"SET-TASKS":return Object(g.a)(Object(g.a)({},t),{},Object(X.a)({},e.todolistId,e.tasks.map((function(t){return Object(g.a)(Object(g.a)({},t),{},{entityStatus:"succeeded"})}))));case"REMOVE-TASK":return Object(g.a)(Object(g.a)({},t),{},Object(X.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.id}))));case"ADD-TASK":return Object(g.a)(Object(g.a)({},t),{},Object(X.a)({},e.task.todoListId,[Object(g.a)(Object(g.a)({},e.task),{},{entityStatus:"succeeded"})].concat(Object(T.a)(t[e.task.todoListId]))));case"UPDATE-TASK":return Object(g.a)(Object(g.a)({},t),{},Object(X.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(g.a)(Object(g.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(g.a)(Object(X.a)({},e.todolist.id,[]),t);case"REMOVE-TODOLIST":var c=Object(g.a)({},t);return delete c[e.id],c;case"CHANGE-TASK-ENTITY-STATUS":return Object(g.a)(Object(g.a)({},t),{},Object(X.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{entityStatus:e.entityStatus}):t}))));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODOS":return e.todos.map((function(t){return Object(g.a)(Object(g.a)({},t),{},{filter:"all",entityStatus:"succeeded"})}));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":return[Object(g.a)(Object(g.a)({},e.todolist),{},{filter:"all",entityStatus:"succeeded"})].concat(Object(T.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(g.a)(Object(g.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(g.a)(Object(g.a)({},t),{},{error:e.error});case"APP/SET-IS-INITIALIZED":return Object(g.a)(Object(g.a)({},t),{},{isInitialized:e.value});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTH/SET-IS-LOGGED-IN":return Object(g.a)(Object(g.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),St=Object(gt.createStore)(xt,Object(Tt.composeWithDevTools)(Object(gt.applyMiddleware)(mt.a)));window.store=St;var vt=n(60);s.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(p.a,{store:St,children:Object(M.jsx)(vt.a,{children:Object(M.jsx)(pt,{})})})}),document.getElementById("root")),d()}},[[171,1,2]]]);
//# sourceMappingURL=main.4206c891.chunk.js.map